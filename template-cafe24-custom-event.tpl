___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "Notifly Cafe24 Custom Event",
  "brand": {
    "id": "notifly",
    "displayName": "Notifly",
    "thumbnail": "data:image/png;base64,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\u003d\u003d"
  },
  "description": "Cafe24 호스팅 환경에서, 커스텀 이벤트를 쉽게 트리거하기위한 태그입니다.",
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "LABEL",
    "name": "trackEventDescription",
    "displayName": "\u003ca href\u003d\"https://docs.notifly.tech/ko/developer-guide/client-sdk/javascript-sdk#track-event\"\u003e이벤트 로깅\u003c/a\u003e - Notifly에 이벤트를 전송합니다."
  },
  {
    "type": "TEXT",
    "name": "eventName",
    "displayName": "이벤트 이름",
    "simpleValueType": true,
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ]
  },
  {
    "type": "SIMPLE_TABLE",
    "name": "eventParams",
    "displayName": "이벤트 패러미터",
    "simpleTableColumns": [
      {
        "defaultValue": "",
        "displayName": "패러미터 이름",
        "name": "key",
        "type": "TEXT",
        "isUnique": true
      },
      {
        "defaultValue": "",
        "displayName": "패러미터 값",
        "name": "value",
        "type": "TEXT"
      }
    ],
    "newRowButtonText": "패러미터 추가"
  },
  {
    "type": "PARAM_TABLE",
    "name": "segmentationEventParamKeys",
    "displayName": "유저 세그먼팅에 사용될 수 있는 이벤트 패러미터 이름 목록",
    "paramTableColumns": [
      {
        "param": {
          "type": "TEXT",
          "name": "key",
          "displayName": "",
          "simpleValueType": true
        },
        "isUnique": true
      }
    ],
    "valueValidators": [
      {
        "type": "TABLE_ROW_COUNT",
        "args": [
          0,
          1
        ]
      }
    ],
    "newRowButtonText": "추가하기"
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

// Enter your template code here.
const log = require('logToConsole');
const copyFromWindow = require('copyFromWindow');
const createQueue = require('createQueue');

const LOG_PREFIX = '[Notifly / GTM] ';
const NAMESPACE = 'notifly';

const _notifly = copyFromWindow(NAMESPACE);

const getKeys = (keys) => keys.map((object) => object.key);
const eventParams = (data.eventParams || []).reduce((current, params) => (current[params.key] = params.value, current), {});
const segmentationEventParamKeys = getKeys(data.segmentationEventParamKeys || []);

if (typeof _notifly !== 'undefined') {
  _notifly.trackEvent(data.eventName, eventParams, segmentationEventParamKeys);
} else {
  log(LOG_PREFIX + 'Notifly website SDK is not loaded yet. Tracking event will be started as soon as notifly website SDK is successfully loaded and initialized.');
  createQueue('__ncq')({
    'type': 'trackEvent',
    'payload': {
      'name': data.eventName,
      'params': eventParams || {},
      'segmentationEventParamKeys': segmentationEventParamKeys
    }
  });
}

// Call data.gtmOnSuccess when the tag is finished.
data.gtmOnSuccess();


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "debug"
          }
        }
      ]
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "access_globals",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keys",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "notifly"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "__ncq"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios: []


___NOTES___

Created on 1/2/2024, 10:16:56 PM


